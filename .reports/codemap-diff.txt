Codemap 差异报告
================

生成时间: 2026-01-30 20:30:00
生成工具: doc-updater Agent

---

## 更新的文件列表

| 文件 | 状态 | 行数 | 变更比例 |
|------|------|------|---------|
| docs/CODEMAPS/architecture.md | 新建 | 212 | 100% (新文件) |
| docs/CODEMAPS/backend.md | 新建 | 310 | 100% (新文件) |
| docs/CODEMAPS/data.md | 新建 | 270 | 100% (新文件) |

---

## 变更说明

### 1. docs/CODEMAPS/architecture.md [100% - 新建]

**内容摘要:**
- 项目分层架构图（6 层）
- 模块依赖关系 Mermaid 图
- Phase 实施状态表（Phase 1-5）
- 目标目录结构
- 双层群体智能架构概览

**变更原因:**
- 此前 CODEMAPS 目录不存在
- 项目缺少架构概览文档
- Phase 1 基础设施已部分完成，需记录当前状态

---

### 2. docs/CODEMAPS/backend.md [100% - 新建]

**内容摘要:**
- 配置系统设计详解 (utils/config.py)
  - 数据类层次结构
  - 核心函数说明
  - 验证规则
  - 使用示例
- 日志系统设计详解 (utils/logger_system.py)
  - 双通道架构
  - Phase 1 重构要点（ERROR 不再自动 raise）
  - 新增 ensure() 和 log_exception()
- 文件工具说明 (utils/file_utils.py)
  - copytree 行为
  - 跨平台兼容性
- 测试架构
  - 目录结构
  - 测试类汇总（16 个测试）
- 核心数据结构占位（Node, Journal, Task - Phase 1 待实现）
- 外部依赖清单

**变更原因:**
- 记录已完成的 Phase 1 基础设施模块
- 为后续开发提供 API 参考
- 文档化日志系统 Phase 1 重构的行为变更

---

### 3. docs/CODEMAPS/data.md [100% - 新建]

**内容摘要:**
- 配置优先级详解（CLI > 系统环境变量 > .env > YAML）
- 配置加载流程图 (Mermaid)
- config/default.yaml 完整结构注释
- .env.example 模板说明
- 环境变量插值语法 (${env:VAR})
- 工作空间目录结构
- 数据准备模式（symlink vs copy）
- 日志文件组织
- 完整数据流图

**变更原因:**
- 配置管理是 Phase 1 的核心交付物
- 需要文档化配置优先级规则
- 为开发者提供工作空间和日志的参考

---

## 扫描的源文件

| 文件 | 行数 | 说明 |
|------|------|------|
| utils/config.py | 457 | 配置管理模块 |
| utils/logger_system.py | 181 | 日志系统模块 |
| utils/file_utils.py | 114 | 文件操作工具 |
| config/default.yaml | 77 | YAML 主配置 |
| .env.example | 36 | 环境变量模板 |
| requirements.txt | 36 | Python 依赖 |
| tests/unit/test_config.py | 460 | 配置测试 |
| tests/unit/test_config_priority.py | 331 | 优先级测试 |
| tests/unit/test_file_utils.py | 123 | 文件工具测试 |

---

## 参考的规划文档

| 文件 | 说明 |
|------|------|
| docs/implementation_plan.md | 总体实施计划 |
| docs/plans/phase1_infrastructure.md | Phase 1 详细设计 |
| docs/plans/phase2_core.md | Phase 2 详细设计 |
| CLAUDE.md | 项目开发规范 |

---

## 后续建议

1. **Phase 1 完成后**: 更新 architecture.md 中的实施状态表
2. **Phase 2 开始时**: 新增 agents.md codemap
3. **Phase 3 开始时**: 新增 evolution.md codemap
4. **每次重大更新**: 重新运行 codemap 生成脚本

---

报告结束
